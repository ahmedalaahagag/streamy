{"ast":null,"code":"/*\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\n *\n * @author zheng qian <xqq@xqq.im>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nlet Browser = {};\n\nfunction detect() {\n  // modified from jquery-browser-plugin\n  let ua = self.navigator.userAgent.toLowerCase();\n  let match = /(edge)\\/([\\w.]+)/.exec(ua) || /(opr)[\\/]([\\w.]+)/.exec(ua) || /(chrome)[ \\/]([\\w.]+)/.exec(ua) || /(iemobile)[\\/]([\\w.]+)/.exec(ua) || /(version)(applewebkit)[ \\/]([\\w.]+).*(safari)[ \\/]([\\w.]+)/.exec(ua) || /(webkit)[ \\/]([\\w.]+).*(version)[ \\/]([\\w.]+).*(safari)[ \\/]([\\w.]+)/.exec(ua) || /(webkit)[ \\/]([\\w.]+)/.exec(ua) || /(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(ua) || /(msie) ([\\w.]+)/.exec(ua) || ua.indexOf('trident') >= 0 && /(rv)(?::| )([\\w.]+)/.exec(ua) || ua.indexOf('compatible') < 0 && /(firefox)[ \\/]([\\w.]+)/.exec(ua) || [];\n  let platform_match = /(ipad)/.exec(ua) || /(ipod)/.exec(ua) || /(windows phone)/.exec(ua) || /(iphone)/.exec(ua) || /(kindle)/.exec(ua) || /(android)/.exec(ua) || /(windows)/.exec(ua) || /(mac)/.exec(ua) || /(linux)/.exec(ua) || /(cros)/.exec(ua) || [];\n  let matched = {\n    browser: match[5] || match[3] || match[1] || '',\n    version: match[2] || match[4] || '0',\n    majorVersion: match[4] || match[2] || '0',\n    platform: platform_match[0] || ''\n  };\n  let browser = {};\n\n  if (matched.browser) {\n    browser[matched.browser] = true;\n    let versionArray = matched.majorVersion.split('.');\n    browser.version = {\n      major: parseInt(matched.majorVersion, 10),\n      string: matched.version\n    };\n\n    if (versionArray.length > 1) {\n      browser.version.minor = parseInt(versionArray[1], 10);\n    }\n\n    if (versionArray.length > 2) {\n      browser.version.build = parseInt(versionArray[2], 10);\n    }\n  }\n\n  if (matched.platform) {\n    browser[matched.platform] = true;\n  }\n\n  if (browser.chrome || browser.opr || browser.safari) {\n    browser.webkit = true;\n  } // MSIE. IE11 has 'rv' identifer\n\n\n  if (browser.rv || browser.iemobile) {\n    if (browser.rv) {\n      delete browser.rv;\n    }\n\n    let msie = 'msie';\n    matched.browser = msie;\n    browser[msie] = true;\n  } // Microsoft Edge\n\n\n  if (browser.edge) {\n    delete browser.edge;\n    let msedge = 'msedge';\n    matched.browser = msedge;\n    browser[msedge] = true;\n  } // Opera 15+\n\n\n  if (browser.opr) {\n    let opera = 'opera';\n    matched.browser = opera;\n    browser[opera] = true;\n  } // Stock android browsers are marked as Safari\n\n\n  if (browser.safari && browser.android) {\n    let android = 'android';\n    matched.browser = android;\n    browser[android] = true;\n  }\n\n  browser.name = matched.browser;\n  browser.platform = matched.platform;\n\n  for (let key in Browser) {\n    if (Browser.hasOwnProperty(key)) {\n      delete Browser[key];\n    }\n  }\n\n  Object.assign(Browser, browser);\n}\n\ndetect();\nexport default Browser;","map":null,"metadata":{},"sourceType":"module"}