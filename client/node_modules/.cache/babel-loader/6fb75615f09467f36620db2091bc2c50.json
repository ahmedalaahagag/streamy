{"ast":null,"code":"/*\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\n *\n * @author zheng qian <xqq@xqq.im>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport Polyfill from './utils/polyfill.js';\nimport Features from './core/features.js';\nimport { BaseLoader, LoaderStatus, LoaderErrors } from './io/loader.js';\nimport FlvPlayer from './player/flv-player.js';\nimport NativePlayer from './player/native-player.js';\nimport PlayerEvents from './player/player-events.js';\nimport { ErrorTypes, ErrorDetails } from './player/player-errors.js';\nimport LoggingControl from './utils/logging-control.js';\nimport { InvalidArgumentException } from './utils/exception.js'; // here are all the interfaces\n// install polyfills\n\nPolyfill.install(); // factory method\n\nfunction createPlayer(mediaDataSource, optionalConfig) {\n  let mds = mediaDataSource;\n\n  if (mds == null || typeof mds !== 'object') {\n    throw new InvalidArgumentException('MediaDataSource must be an javascript object!');\n  }\n\n  if (!mds.hasOwnProperty('type')) {\n    throw new InvalidArgumentException('MediaDataSource must has type field to indicate video file type!');\n  }\n\n  switch (mds.type) {\n    case 'flv':\n      return new FlvPlayer(mds, optionalConfig);\n\n    default:\n      return new NativePlayer(mds, optionalConfig);\n  }\n} // feature detection\n\n\nfunction isSupported() {\n  return Features.supportMSEH264Playback();\n}\n\nfunction getFeatureList() {\n  return Features.getFeatureList();\n} // interfaces\n\n\nlet flvjs = {};\nflvjs.createPlayer = createPlayer;\nflvjs.isSupported = isSupported;\nflvjs.getFeatureList = getFeatureList;\nflvjs.BaseLoader = BaseLoader;\nflvjs.LoaderStatus = LoaderStatus;\nflvjs.LoaderErrors = LoaderErrors;\nflvjs.Events = PlayerEvents;\nflvjs.ErrorTypes = ErrorTypes;\nflvjs.ErrorDetails = ErrorDetails;\nflvjs.FlvPlayer = FlvPlayer;\nflvjs.NativePlayer = NativePlayer;\nflvjs.LoggingControl = LoggingControl;\nObject.defineProperty(flvjs, 'version', {\n  enumerable: true,\n  get: function () {\n    // replaced by browserify-versionify transform\n    return '__VERSION__';\n  }\n});\nexport default flvjs;","map":null,"metadata":{},"sourceType":"module"}